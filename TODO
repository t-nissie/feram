ToDo:
o 使うGPUって環境変数で選べるの？

o (nightly) automation of unit test with "make check"

o (nightly) automation of profiling and timing

o Temperature from averaging acou_kinetic and dipo_kinetic

o continue_without_restart_file for avoiding huge .coord files

o Reduce memory size using in-place FFT and
  rank remapping or array dimension changing (See in-place-FFT.ja.txt)

o coord fileの桁数を上げて高精度化。ファイルサイズは大きくなってしまうけど。

o No need to initialize Energy_type ???

o e%acou_kinetic=0 if mass_acou<0

o Needs mirror of c%E_field in hysteresis_loop.F, maybe.

o 'md' have to be changed to 'np' Nose-Poincare.
o Nose-Poincareでもacoustic displacementのMDができるように．
o Imprement Nose:JPhysSocJpn:70:p75-77:2001

o Use -simd=aggressive ???

o Do not make fft.F module. It receives complex as real.

o Error messages to stderr.

o Copyright

o Examples

o In initialize-dipoR.F, c%dipoP() must be multiplied by c%s_Nose after read ???

o When n_hysteresis_loop_continue is given, the .hl file must no REPLACEd, must be APPENDed.

o FILENAME.avgの出力の見直し polarization -> <u_z> とか

o plot_dispersion = .ture. のとき32x32x32を使う。FILENAME.param.gp は無くす方向で。

o slice.rb マニュアル

o cross-section マニュアル

o dVddi_... -> dV_du_...

o foo-bar.F -> foo_bar.F

o UNIT_SYSTEM の整理

o mirror_force_mirror.F の最後の力のミラーが必要かどうか。必然的に対称になっているはず。

o read_defects_u.F: we may have to count the number of free dipoles.

o  call dipoFFT(p,c)
   call  dVddi_dipole_dipole(p,c,e)
   call     dVddi_unharmonic(p,c,e)
   call        dVddi_E_field(p,c,e)
   call optimize_homo_strain(p,c,e)
   call optimize_inho_strain(p,c,e)
       は nose-poincare.F, leapfrog.F, initialize_dipoR.F に共通なのでまとめる。

o libbuilt_in_fft 128 256, libbuilt_in_fft -> libminimal_fft

o Makefile.amの依存関係。並列コンパイルmake -jでデバグできる。
  たとえMakefile.amに依存関係が適切に書かれていても、
  XL Fortranが書き出すa.lstが並列コンパイルの邪魔をする。
  a.lstは何？これはmakeの新オプション--output-sync（-O）で回避できる？

o 依存関係の自動生成。gfortranに新しく導入される-Mオプションの活用？ makedepf90？


o 力の計算の部分をsubroutineにして、leapfrog をもう一度動くようにする。

o Use msg() in write_Param() of param_module.F.

o striped structure を initial configuration にできるようにする.

o refactoring nose-poincare.F and energy.F

o 3 node parallelization

o replace DSYEV().

o use autoconf and make configure

o average 4倍精度に？

o start.coord があれば読み込む。alloc_Coord(p,c) で？

o (coord を かきだし はじめる ところ おわる ところ AVERAGE の あいだだけ)

o p, q, qdot にして, いつmassで割るか考える.

o src/hysteresis_loop.F DETAILED_MESSAGES

o dipoA_dipole_dipole() を dipoA = dipoA + dipoA_dipole_dipole に.

o Q_nose must be a function of T, N and delta_t. AUTOMATIC determination.

o Automatical determination of kappa
  kappa for the Ewald summation must be a function of Lx, Ly and Lz

o strain energy の 計算をする部分を分離.

o compare 16x16x16, 32x32x32 

o LargeKappa.gp

o dipoI(:,:,:,3,3) Upper Triangle だけにする？
  FFTの計算はUpper Triangle だけやってC.C.をこぴーするようにした.
  配列は3x3のまま.
  どのくらいメモリを減らせる？

o mass_acoustic, mass_strain なんか関係がある

o 3-dimensional hedgehog plot (`with vec` is not available for splot of GNUPLOT)

o interface文

o initial spin configuration をつくる program をわける？

o mass の 9648.53377163899 を define.h へ

o children, parents, use

o input file parserをつくる, input file と param.gp とをきょうつうか
  タイトルも引数で指定できるようにしないと面倒臭い。

o call msg() DEPTH or p%message_depth

o Use class of Fortran 2003: class Ferroelectrics has a Param, a Coord and a Energy


Done:
x plot_dispersion = .ture. で分散関係が出力されるようにする。

x LARGE_MASS_INV = 1.0d0 / 1000000000.0d0

x 入力ファイルの整備

x .F -> .F90 やらない

x 16(kappa=0.22), 32(kappa=0.08), 64(kappa=0.055) で精度を検証
  dipole-dipole-long.dat が ??e-31になってるから OK?

x dipole-dipole.gp


x coord.F: complex*16, allocatable :: dipoP(:,:,:,:,:)
  real*8 にする

x make dipole-dipole.F's children
	short-range.F
	long-range.F
  dipole-dipole only と, それに short-range をくわえたものをふたつともだせるようにする.

x normal.f
  正規分布する乱数発生サブルーチン。参考文献をちゃんと書く。

x param.F
  初期dipole momentの平均値と標準偏差をを与えることが出来るようにする。
  分散 variance
  偏差 deviation  init_u_dev(3)
  平均 average    init_u_avg(3)

x Lz_periodic -> Lz      change mirror.f

x fft.F、SR11000用 HZFT7M()の代わりにHDFZ7M()とHZFD7M()とを使うようにして、
  さらに２度目の呼び出しから係数の計算などを省くようにする。要configure.acの変更。

x detailed_messages -> verbose, in configure.ac, README.en and source code

x Quit to use libblaslapack/

x p%mass_dipo の default value を 100 amu に

x p%acoustic_mass_amu の導入

x 交流電場を掛けられるようにして、hysteresis_loop.F と
  molecular-dynamics.F とを統合。sin, cos, (sawsin, sawcos,) ...

x Use wisdom

x Introduce  method = 'vs'  with src/velocity_scaling.F for MD.

x fft.FのDFZ7M()とHZFD7M()、Nx must be even???　→もうMATRIX/MPPは使わない

x -parallel for ifort -> Everythings are parallelized with OpenMP.

x add seeds to normal_dist(mu,sigma,seed1,seed2). speed up DOUBLE.

x acoustic displacement も MD.
