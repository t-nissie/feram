#-*-Makefile-*- for examples of feram
# Time-stamp: <2007-09-07 08:56:31 takeshi>
# Author: Takeshi NISHIMATSU
##
srcdir = @srcdir@
VPATH = @srcdir@

all: test-basic

subdirectories:
ifneq "$(srcdir)" "."
	tar -C $(srcdir) -c --exclude=Makefile -f - . | tar xf -
	rm -rf `find . -type d -name .svn`
endif

test-basic: BaTiO3-bulk-16x16x16/phase_transition.eps

test-all:   BaTiO3-bulk-16x16x16/phase_transition.eps \
            BaTiO3-bulk-32x32x32/phase_transition.eps

%.eps: subdirectories ../src/feram
	../src/feram `dirname $@`/heating `dirname $@`/cooling
	gnuplot $(subst .eps,.gp,$@)

../src/feram:
	cd ../src && $(MAKE)

.PRECIOUS: Makefile
Makefile: $(srcdir)/Makefile.in
	cd .. && ./config.status examples/$@

%.pdf: %.eps
	ps2pdf -sPAPERSIZE=letter $< $@

distclean: clean
	rm -f Makefile

clean:
	rm -f */*.coord */*.dat *.dat core* */core* */*.eps */*.param */*.avg */*.log */*.out
